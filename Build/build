#!/bin/bash

echo
echo
echo NOTE: If you are building from a clean repository, you will need to answer a few questions after restoring NuGet packages before the build can continue.
echo
echo

BUILD=msbuild
PLATFORM=$(test `arch` = x86_64 && echo x64 || echo x86)

"$(dirname "$0")"/run-in-environ $BUILD "/t:RestoreNuGetPackages" && \
"$(dirname "$0")"/run-in-environ $BUILD "/t:CheckDevelopmentPropertiesFile" && \
"$(dirname "$0")"/run-in-environ $BUILD "/t:refreshTargets" && \
"$(dirname "$0")"/run-in-environ $BUILD /p:Platform=$PLATFORM "$@"
